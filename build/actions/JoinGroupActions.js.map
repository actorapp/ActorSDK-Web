{"version":3,"sources":["../../src/actions/JoinGroupActions.js"],"names":["joinSuccess","peer","GROUP_JOIN_VIA_LINK_SUCCESS","setTimeout","replace","key","joinFailed","error","GROUP_JOIN_VIA_LINK_ERROR","joinAfterLogin","getState","token","push","joinGroupViaLink","GROUP_JOIN_VIA_LINK","joinGroupViaToken","then"],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACzB,oCAAS,+BAAYC,2BAArB;AACAC,aAAW;AAAA,WAAM,kBAAQC,OAAR,UAAuBH,KAAKI,GAA5B,CAAN;AAAA,GAAX,EAAqD,IAArD;AACD,C,CAbD;;;;AAeA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACzB,oCAAS,+BAAYC,yBAArB,EAAgD,EAAED,YAAF,EAAhD;AACD;;kBAEc;AACbE,gBADa,4BACI;AAAA,gCACG,yBAAeC,QAAf,EADH;;AAAA,QACPC,KADO,yBACPA,KADO;;AAEf,QAAIA,KAAJ,EAAW;AACT,wBAAQC,IAAR,YAAsBD,KAAtB;AACD;AACF,GANY;AAObE,kBAPa,4BAOIF,KAPJ,EAOW;AACtB,sCAAS,+BAAYG,mBAArB,EAA0C,EAAEH,YAAF,EAA1C;AACA,0BAAYI,iBAAZ,CAA8BJ,KAA9B,EAAqCK,IAArC,CAA0ChB,WAA1C,EAAuDM,UAAvD;AACD;AAVY,C","file":"JoinGroupActions.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { dispatch } from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\nimport history from '../utils/history';\nimport JoinGroupStore from '../stores/JoinGroupStore';\n\nfunction joinSuccess(peer) {\n  dispatch(ActionTypes.GROUP_JOIN_VIA_LINK_SUCCESS);\n  setTimeout(() => history.replace(`/im/${peer.key}`), 1000);\n}\n\nfunction joinFailed(error) {\n  dispatch(ActionTypes.GROUP_JOIN_VIA_LINK_ERROR, { error });\n}\n\nexport default {\n  joinAfterLogin() {\n    const { token } = JoinGroupStore.getState();\n    if (token) {\n      history.push(`/join/${token}`);\n    }\n  },\n  joinGroupViaLink(token) {\n    dispatch(ActionTypes.GROUP_JOIN_VIA_LINK, { token });\n    ActorClient.joinGroupViaToken(token).then(joinSuccess, joinFailed);\n  }\n};\n"]}