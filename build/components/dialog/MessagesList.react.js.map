{"version":3,"sources":["../../../src/components/dialog/MessagesList.react.js"],"names":[],"mappings":";;;;AAIA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEM;;;;;;;;;yBAeJ,yCAAgB;iBACgC,KAAK,KAAL,CADhC;QACP,mBADO;QACD,2BADC;QACS,iDADT;;;AAGd,QAAI,YAAY,mBAAZ,EAAiC;AACnC,aAAO,mDAAS,MAAM,IAAN,EAAT,CAAP,CADmC;KAArC;;AAIA,WAAO,IAAP,CAPc;;;AAfZ,yBAyBJ,yCAAgB;kBAC0B,KAAK,KAAL,CAD1B;QACP,kDADO;QACc,4BADd;;;AAGd,QAAI,CAAC,mBAAD,IAAwB,SAAS,MAAT,IAAmB,EAAnB,EAAuB;AACjD,aAAO,sDAAP,CADiD;KAAnD;;AAIA,WAAO,IAAP,CAPc;;;AAzBZ,yBAmCJ,2CAAiB;;;kBACiD,KAAK,KAAL,CADjD;QACR,4BADQ;QACE,4CADF;QACoB,oBADpB;QAC0B,0BAD1B;QACmC,gCADnC;QAER,cAAe,KAAK,KAAL,CAAW,UAAX,CAAf,YAFQ;;;AAIf,QAAM,SAAS,EAAT,CAJS;AAKf,yBAAQ,QAAR,EAAkB,UAAC,OAAD,EAAU,KAAV,EAAoB;AACpC,UAAM,cAAc,QAAQ,KAAR,CAAd,CAD8B;AAEpC,UAAI,eAAe,YAAY,WAAZ,EAAyB;AAC1C,eAAO,IAAP,CACE;;YAAI,WAAU,cAAV,EAAyB,WAAS,KAAT,EAA7B;UACG,YAAY,WAAZ;SAFL,EAD0C;OAA5C;;AAQA,aAAO,IAAP,CACE,8BAAC,WAAD;AACE,aAAK,QAAQ,OAAR;AACL,iBAAS,OAAT;AACA,iBAAS,QAAQ,KAAR,CAAT;AACA,oBAAY,iBAAiB,GAAjB,CAAqB,QAAQ,GAAR,CAAjC;AACA,kBAAU,OAAK,KAAL,CAAW,QAAX;AACV,4BAAoB,OAAK,KAAL,CAAW,kBAAX;AACpB,cAAM,IAAN;OAPF,CADF,EAVoC;KAApB,CAAlB,CALe;;AA4Bf,WAAO,MAAP,CA5Be;;;AAnCb,yBAkEJ,2BAAS;AACP,WACE;;QAAI,WAAU,gBAAV,EAAJ;MACG,KAAK,aAAL,EADH;MAEG,KAAK,aAAL,EAFH;MAGG,KAAK,cAAL,EAHH;KADF,CADO;;;SAlEL;;;aACG,YAAY;AACjB,YAAU,iBAAU,KAAV,CAAgB,UAAhB;AACV,oBAAkB,iBAAU,MAAV,CAAiB,UAAjB;AAClB,QAAM,iBAAU,MAAV,CAAiB,UAAjB;AACN,WAAS,iBAAU,KAAV,CAAgB,UAAhB;AACT,YAAU,iBAAU,IAAV,CAAe,UAAf;AACV,uBAAqB,iBAAU,IAAV,CAAe,UAAf;AACrB,cAAY,iBAAU,KAAV,CAAgB;AAC1B,iBAAa,iBAAU,IAAV,CAAe,UAAf;GADH,EAET,UAFS;AAGZ,YAAU,iBAAU,IAAV,CAAe,UAAf;AACV,sBAAoB,iBAAU,IAAV,CAAe,UAAf;;kBAiET","file":"MessagesList.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { forEach } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport Loading from './messages/Loading.react';\nimport Welcome from './messages/Welcome.react';\n\nclass MessagesList extends Component {\n  static propTypes = {\n    messages: PropTypes.array.isRequired,\n    selectedMessages: PropTypes.object.isRequired,\n    peer: PropTypes.object.isRequired,\n    overlay: PropTypes.array.isRequired,\n    isMember: PropTypes.bool.isRequired,\n    isAllMessagesLoaded: PropTypes.bool.isRequired,\n    components: PropTypes.shape({\n      MessageItem: PropTypes.func.isRequired\n    }).isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onVisibilityChange: PropTypes.func.isRequired\n  };\n\n  renderWelcome() {\n    const {peer, isMember, isAllMessagesLoaded} = this.props;\n\n    if (isMember && isAllMessagesLoaded) {\n      return <Welcome peer={peer} />;\n    }\n\n    return null;\n  }\n\n  renderLoading() {\n    const {isAllMessagesLoaded, messages} = this.props;\n\n    if (!isAllMessagesLoaded && messages.length >= 30) {\n      return <Loading />;\n    }\n\n    return null;\n  }\n\n  renderMessages() {\n    const {messages, selectedMessages, peer, overlay, components} = this.props;\n    const {MessageItem} = this.props.components;\n\n    const result = [];\n    forEach(messages, (message, index) => {\n      const overlayItem = overlay[index];\n      if (overlayItem && overlayItem.dateDivider) {\n        result.push(\n          <li className=\"date-divider\" key={`o${index}`}>\n            {overlayItem.dateDivider}\n          </li>\n        );\n      }\n\n      result.push(\n        <MessageItem\n          key={message.sortKey}\n          message={message}\n          overlay={overlay[index]}\n          isSelected={selectedMessages.has(message.rid)}\n          onSelect={this.props.onSelect}\n          onVisibilityChange={this.props.onVisibilityChange}\n          peer={peer}\n        />\n      );\n    });\n\n    return result;\n  }\n\n  render() {\n    return (\n      <ul className=\"messages__list\">\n        {this.renderWelcome()}\n        {this.renderLoading()}\n        {this.renderMessages()}\n      </ul>\n    )\n  }\n}\n\nexport default MessagesList;\n"]}