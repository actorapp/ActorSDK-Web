{"version":3,"sources":["../../../../src/components/modals/invite-user/InviteByLink.react.js"],"names":[],"mappings":"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","file":"InviteByLink.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport { assign } from 'lodash';\nimport React, { Component, PropTypes } from 'react';\nimport Modal from 'react-modal';\nimport ReactMixin from 'react-mixin';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport { FormattedMessage } from 'react-intl';\nimport { escapeWithEmoji } from '../../../utils/EmojiUtils'\n\nimport { KeyCodes } from '../../../constants/ActorAppConstants';\n\nimport InviteUserByLinkActions from '../../../actions/InviteUserByLinkActions';\nimport InviteUserActions from '../../../actions/InviteUserActions';\n\nimport InviteUserStore from '../../../stores/InviteUserStore';\n\nconst getStateFromStores = () => {\n  return {\n    isOpen: InviteUserStore.isInviteWithLinkModalOpen(),\n    group: InviteUserStore.getGroup(),\n    inviteUrl: InviteUserStore.getInviteUrl()\n  };\n};\n\nclass InviteByLink extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = getStateFromStores();\n\n    InviteUserStore.addChangeListener(this.onChange);\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  componentWillUnmount() {\n    InviteUserStore.removeChangeListener(this.onChange);\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      document.addEventListener('keydown', this.onKeyDown, false);\n    } else if (this.state.isOpen && !nextState.isOpen) {\n      document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n  }\n\n  onChange = () => this.setState(getStateFromStores());\n  onClose = () => InviteUserByLinkActions.hide();\n  onInviteLinkClick = event => event.target.select();\n\n  onBackClick = () => {\n    const { group } = this.state;\n\n    this.onClose();\n    InviteUserActions.show(group);\n  };\n\n  onKeyDown = (event) => {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.onClose();\n    }\n  };\n\n  render() {\n    const { group, inviteUrl, isOpen } = this.state;\n    const { intl } = this.context;\n\n    const groupName = (group !== null) ? <b dangerouslySetInnerHTML={{__html: escapeWithEmoji(group.name)}}/> : null;\n\n    const modalStyle = {\n      content : {\n        position: null,\n        top: null,\n        left: null,\n        right: null,\n        bottom: null,\n        border: null,\n        background: null,\n        overflow: null,\n        outline: null,\n        padding: null,\n        borderRadius: null,\n        width: 440\n      }\n    };\n\n    if (isOpen) {\n      return (\n        <Modal className=\"modal-new modal-new--invite-by-link\"\n               closeTimeoutMS={150}\n               isOpen={isOpen}\n               style={modalStyle}>\n\n          <header className=\"modal-new__header\">\n            <svg className=\"modal-new__header__icon icon icon--blue\"\n                 dangerouslySetInnerHTML={{__html: '<use xlink:href=\"assets/images/icons.svg#back\"/>'}}\n                 onClick={this.onBackClick}/>\n\n            <h3 className=\"modal-new__header__title\">\n              {intl.messages['inviteByLinkModalTitle']}\n            </h3>\n\n            <div className=\"pull-right\">\n              <button className=\"button button--lightblue\" onClick={this.onClose}>{intl.messages['button.done']}</button>\n            </div>\n          </header>\n\n          <div className=\"modal-new__body\">\n            <FormattedMessage id=\"inviteByLinkModalDescription\" values={{groupName}}/>\n            <textarea className=\"textarea\" onClick={this.onInviteLinkClick} readOnly row=\"3\" value={inviteUrl}/>\n          </div>\n\n          <footer className=\"modal-new__footer\">\n            <button className=\"button button--rised pull-left hide\">\n              {intl.messages['inviteByLinkModalRevokeButton']}\n            </button>\n            <button className=\"button button--rised pull-right hide\">\n              {intl.messages['inviteByLinkModalCopyButton']}\n            </button>\n          </footer>\n        </Modal>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nReactMixin.onClass(InviteByLink, PureRenderMixin);\n\nexport default InviteByLink;\n"]}