{"version":3,"sources":["../../../src/components/search/ToolbarSearch.react.js"],"names":["ToolbarSearch","getStores","calculateState","getState","props","handleSearchChange","bind","handlerSearchClear","handleSearchBlur","handleSearchFocus","onResultSelect","clear","blur","focus","query","handleSearch","index","results","state","length","goToMessagesSearch","contact","goToContact","renderSearchResultsDropdown","isFocused","render","toolbarSearchClassName","handleToolbarSearchClick","create"],"mappings":";;;;AAIA;;;;AACA;;AACA;;;;AACA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;+eAfA;;;;IAiBMA,a;;;gBACGC,S,wBAAY;AACjB,WAAO,uBAAP;AACD,G;;gBAEMC,c,6BAAiB;AACtB,WAAO,sBAAYC,QAAZ,EAAP;AACD,G;;AAED,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,OAA1B;AACA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,OAA1B;AACA,UAAKE,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBF,IAAtB,OAAxB;AACA,UAAKG,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBH,IAAvB,OAAzB;AACA,UAAKI,cAAL,GAAsB,MAAKA,cAAL,CAAoBJ,IAApB,OAAtB;AAPiB;AAQlB;;0BAEDC,kB,iCAAqB;AACnB,mCAAqBI,KAArB;AACD,G;;0BAEDH,gB,+BAAmB;AACjB,mCAAqBI,IAArB;AACD,G;;0BAEDH,iB,gCAAoB;AAClB,mCAAqBI,KAArB;AACD,G;;0BAEDR,kB,+BAAmBS,K,EAAO;AACxB,mCAAqBC,YAArB,CAAkCD,KAAlC;AACD,G;;0BAEDJ,c,2BAAeM,K,EAAO;AAAA,QACZC,OADY,GACA,KAAKC,KADL,CACZD,OADY;;AAEpB,QAAID,UAAUC,QAAQE,MAAtB,EAA8B;AAC5B,qCAAqBC,kBAArB,CAAwC,KAAKF,KAAL,CAAWJ,KAAnD;AACD,KAFD,MAEO;AACL,UAAMO,UAAUJ,QAAQD,KAAR,CAAhB;AACA,qCAAqBM,WAArB,CAAiCD,OAAjC;AACD;AACF,G;;0BAEDE,2B,0CAA8B;AAAA,iBACU,KAAKL,KADf;AAAA,QACpBM,SADoB,UACpBA,SADoB;AAAA,QACTV,KADS,UACTA,KADS;AAAA,QACFG,OADE,UACFA,OADE;;;AAG5B,QAAI,CAACO,SAAL,EAAgB;AACd,aAAO,IAAP;AACD;;AAED,QAAI,CAACV,MAAMK,MAAX,EAAmB;AACjB,aACE;AAAA;AAAA,UAAK,WAAU,2BAAf;AACE;AAAA;AAAA,YAAK,WAAU,MAAf;AACE,2EAAsB,IAAG,aAAzB;AADF;AADF,OADF;AAOD;;AAED,WACE;AAAA;AAAA,QAAY,WAAU,2BAAtB,EAAkD,KAAKF,QAAQE,MAA/D,EAAuE,UAAU,KAAKT,cAAtF;AACE,sEAAsB,OAAOI,KAA7B,EAAmC,SAASG,OAA5C,GADF;AAEE;AAAA;AAAA,UAAgB,OAAOA,QAAQE,MAA/B;AACE;AAAA;AAAA,YAAQ,WAAU,yBAAlB;AACE,uEAAkB,IAAG,iBAArB,GADF;AAAA;AAC2C;AAAA;AAAA,cAAG,WAAU,gBAAb;AAAA;AAAA;AAD3C;AADF;AAFF,KADF;AAUD,G;;0BAEDM,M,qBAAS;AAAA,kBACsB,KAAKP,KAD3B;AAAA,QACCJ,KADD,WACCA,KADD;AAAA,QACQU,SADR,WACQA,SADR;;AAEP,QAAME,yBAAyB,0BAAW,qBAAX,EAAkC;AAC/D,kCAA4BF;AADmC,KAAlC,CAA/B;;AAIA,WACE;AAAA;AAAA,QAAK,WAAWE,sBAAhB,EAAwC,SAAS,KAAKC,wBAAtD;AACE;AAAA;AAAA,UAAK,WAAU,KAAf;AACE;AAAA;AAAA,YAAG,WAAU,4BAAb;AAAA;AAAA,SADF;AAEE;AACE,iBAAOb,KADT;AAEE,qBAAWU,SAFb;AAGE,kBAAQ,KAAKhB,gBAHf;AAIE,mBAAS,KAAKC,iBAJhB;AAKE,mBAAS,KAAKF,kBALhB;AAME,oBAAU,KAAKF;AANjB;AAFF,OADF;AAYG,WAAKkB,2BAAL;AAZH,KADF;AAgBD,G;;;;;kBAGY,iBAAUK,MAAV,CAAiB5B,aAAjB,C","file":"ToolbarSearch.react.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\n\nimport SearchStore from '../../stores/SearchStore';\nimport SearchActionCreators from '../../actions/SearchActionCreators';\n\nimport SearchInput from './SearchInput.react';\nimport SelectList from '../common/SelectList.react';\nimport SelectListItem from '../common/SelectListItem.react';\nimport ToolbarSearchResults from './ToolbarSearchResults.react';\n\nclass ToolbarSearch extends Component {\n  static getStores() {\n    return [SearchStore];\n  }\n\n  static calculateState() {\n    return SearchStore.getState();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n    this.handlerSearchClear = this.handlerSearchClear.bind(this);\n    this.handleSearchBlur = this.handleSearchBlur.bind(this);\n    this.handleSearchFocus = this.handleSearchFocus.bind(this);\n    this.onResultSelect = this.onResultSelect.bind(this);\n  }\n\n  handlerSearchClear() {\n    SearchActionCreators.clear();\n  }\n\n  handleSearchBlur() {\n    SearchActionCreators.blur();\n  }\n\n  handleSearchFocus() {\n    SearchActionCreators.focus();\n  }\n\n  handleSearchChange(query) {\n    SearchActionCreators.handleSearch(query);\n  }\n\n  onResultSelect(index) {\n    const { results } = this.state;\n    if (index === results.length) {\n      SearchActionCreators.goToMessagesSearch(this.state.query);\n    } else {\n      const contact = results[index];\n      SearchActionCreators.goToContact(contact);\n    }\n  }\n\n  renderSearchResultsDropdown() {\n    const { isFocused, query, results } = this.state;\n\n    if (!isFocused) {\n      return null\n    }\n\n    if (!query.length) {\n      return (\n        <div className=\"toolbar__search__dropdown\">\n          <div className=\"hint\">\n            <FormattedHTMLMessage id=\"search.hint\"/>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <SelectList className=\"toolbar__search__dropdown\" max={results.length} onSelect={this.onResultSelect}>\n        <ToolbarSearchResults query={query}results={results} />\n        <SelectListItem index={results.length}>\n          <footer className=\"toolbar__search__footer\">\n            <FormattedMessage id=\"search.inDialog\"/> <i className=\"material-icons\">arrow_forward</i>\n          </footer>\n        </SelectListItem>\n      </SelectList>\n    );\n  }\n\n  render() {\n    const { query, isFocused } = this.state;\n    const toolbarSearchClassName = classnames('toolbar__search row', {\n      'toolbar__search--focused': isFocused\n    });\n\n    return (\n      <div className={toolbarSearchClassName} onClick={this.handleToolbarSearchClick}>\n        <div className=\"row\">\n          <i className=\"search-icon material-icons\">search</i>\n          <SearchInput\n            value={query}\n            isFocused={isFocused}\n            onBlur={this.handleSearchBlur}\n            onFocus={this.handleSearchFocus}\n            onClear={this.handlerSearchClear}\n            onChange={this.handleSearchChange}\n          />\n        </div>\n        {this.renderSearchResultsDropdown()}\n      </div>\n    );\n  }\n}\n\nexport default Container.create(ToolbarSearch);\n"]}