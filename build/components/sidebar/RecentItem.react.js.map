{"version":3,"sources":["../../../src/components/sidebar/RecentItem.react.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAuBM;;;;;;;;;;;;4IAoBJ,gBAAgB,UAAC,KAAD,EAAW;AACzB,YAAM,cAAN,GADyB;UAEjB,OAAS,MAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB,CAAT,KAFiB;;AAGzB,UAAM,aAAa;AACjB,WAAG,MAAM,KAAN,IAAe,MAAM,OAAN;AAClB,WAAG,MAAM,KAAN,IAAe,MAAM,OAAN;OAFd,CAHmB;AAOzB,uCAAuB,qBAAvB,CAA6C,UAA7C,EAAyD,IAAzD,EAPyB;KAAX;;;AApBZ,aAUG,iCAAY;AACjB,WAAO,wBAAP,CADiB;;;AAVf,aAcG,yCAAe,WAAW,WAAW;AAC1C,WAAO;AACL,wBAAkB,uBAAa,mBAAb,CAAiC,UAAU,MAAV,CAAiB,IAAjB,CAAsB,IAAtB,CAA2B,EAA3B,CAAnD;KADF,CAD0C;;;AAdxC,uBA8BJ,2BAAS;iBACkB,KAAK,KAAL,CADlB;QACC,uBADD;QACS,mBADT;QAEC,mBAAqB,KAAK,KAAL,CAArB,iBAFD;;AAGP,QAAM,SAAS,oBAAU,YAAV,CAAuB,OAAO,IAAP,CAAY,IAAZ,CAAhC,CAHC;;AAKP,QAAM,kBAAkB,0BAAW,qBAAX,EAAkC,KAAlC,EAAyC;AAC/D,qCAA+B,OAAO,OAAP,GAAiB,CAAjB;KADT,CAAlB,CALC;;AASP,WACE;;QAAI,eAAe,KAAK,aAAL,EAAnB;MACE;;UAAM,aAAW,MAAX,EAAqB,WAAW,eAAX,EAA4B,iBAAgB,6BAAhB,EAAvD;QAEE,sDAAY,OAAO,OAAO,IAAP,CAAY,MAAZ;AACP,uBAAa,OAAO,IAAP,CAAY,WAAZ;AACb,gBAAK,MAAL;AACA,iBAAO,OAAO,IAAP,CAAY,KAAZ,EAHnB,CAFF;QAOE,uCAAK,WAAU,cAAV,EAAyB,yBAAyB,EAAC,QAAQ,iCAAgB,OAAO,IAAP,CAAY,KAAZ,CAAxB,EAA1B,EAA9B,CAPF;QAUI,OAAO,OAAP,GAAiB,CAAjB,GACI;;YAAM,WAAU,SAAV,EAAN;UAA2B,OAAO,OAAP;SAD/B,GAEI,IAFJ;QAKF;6BAAU,IAAV;YAAe,cAAc,gBAAd,EAAf;UACE;+BAAU,UAAV;;YACE;;gBAAK,WAAU,8BAAV,EAAL;cACE;;kBAAG,WAAU,0BAAV,EAAH;;eADF;aADF;WADF;UAME;+BAAU,OAAV;;YACE;;gBAAK,WAAU,8BAAV,EAAL;cACE;;kBAAG,WAAU,qBAAV,EAAH;;eADF;aADF;WANF;UAWE;+BAAU,OAAV;;YACE;;gBAAK,WAAU,0BAAV,EAAL;cACE;;kBAAG,WAAU,qBAAV,EAAH;;eADF;aADF;WAXF;SAfF;OADF;KADF,CATO;;;SA9BL;;;WACG,YAAY;AACjB,UAAQ,iBAAU,MAAV,CAAiB,UAAjB;AACR,QAAM,iBAAU,MAAV;;AAHJ,WAMG,eAAe;AACpB,QAAM,iBAAU,MAAV;;kBAyEK,iBAAU,MAAV,CAAiB,UAAjB,EAA6B,EAAC,MAAM,KAAN,EAAa,WAAW,IAAX,EAA3C","file":"RecentItem.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport PeerUtils from '../../utils/PeerUtils';\nimport { escapeWithEmoji } from '../../utils/EmojiUtils';\nimport confirm from '../../utils/confirm';\nimport { Link } from 'react-router';\n\nimport DialogActionCreators from '../../actions/DialogActionCreators';\nimport DropdownActionCreators from '../../actions/DropdownActionCreators';\n\nimport UserStore from '../../stores/UserStore';\nimport ArchiveStore from '../../stores/ArchiveStore';\n\nimport AvatarItem from '../common/AvatarItem.react';\nimport Stateful from '../common/Stateful';\n\nclass RecentItem extends Component {\n  static propTypes = {\n    dialog: PropTypes.object.isRequired,\n    type: PropTypes.string\n  };\n\n  static contextTypes = {\n    intl: PropTypes.object\n  };\n\n  static getStores() {\n    return [ArchiveStore];\n  }\n\n  static calculateState(prevState, nextProps) {\n    return {\n      archiveChatState: ArchiveStore.getArchiveChatState(nextProps.dialog.peer.peer.id)\n    };\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n    const { peer } = this.props.dialog.peer;\n    const contextPos = {\n      x: event.pageX || event.clientX,\n      y: event.pageY || event.clientY\n    };\n    DropdownActionCreators.openRecentContextMenu(contextPos, peer);\n  }\n\n  render() {\n    const { dialog, type } = this.props;\n    const { archiveChatState } = this.state;\n    const toPeer = PeerUtils.peerToString(dialog.peer.peer);\n\n    const recentClassName = classnames('sidebar__list__item', 'row', {\n      'sidebar__list__item--unread': dialog.counter > 0\n    });\n\n    return (\n      <li onContextMenu={this.onContextMenu}>\n        <Link to={`/im/${toPeer}`} className={recentClassName} activeClassName=\"sidebar__list__item--active\">\n\n          <AvatarItem image={dialog.peer.avatar}\n                      placeholder={dialog.peer.placeholder}\n                      size=\"tiny\"\n                      title={dialog.peer.title}/>\n\n          <div className=\"title col-xs\" dangerouslySetInnerHTML={{__html: escapeWithEmoji(dialog.peer.title)}}/>\n\n          {\n            dialog.counter > 0\n              ? <span className=\"counter\">{dialog.counter}</span>\n              : null\n          }\n\n          <Stateful.Root currentState={archiveChatState}>\n            <Stateful.Processing>\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons spin\">autorenew</i>\n              </div>\n            </Stateful.Processing>\n            <Stateful.Success>\n              <div className=\"archive archive--in-progress\">\n                <i className=\"icon material-icons\">check</i>\n              </div>\n            </Stateful.Success>\n            <Stateful.Failure>\n              <div className=\"archive archive--failure\">\n                <i className=\"icon material-icons\">warning</i>\n              </div>\n            </Stateful.Failure>\n          </Stateful.Root>\n\n        </Link>\n      </li>\n    );\n  }\n}\n\nexport default Container.create(RecentItem, {pure: false, withProps: true});\n"]}